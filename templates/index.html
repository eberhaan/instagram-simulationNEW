<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>Start</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
.profile-img {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  cursor: pointer;
  margin: 5px;
  border: 2px solid transparent;
}
.profile-img.selected {
  border: 2px solid #007bff;
}
</style>
</head>
<body>
<div class="container mt-5">
  <h3>WÃ¤hle deinen Username und Profilbild</h3>

  <!-- Query-Parameter p & c bleiben erhalten -->
  <form method="POST" action="/?p={{ request.args.get('p','1') }}&c={{ request.args.get('c','i') }}">
    <div class="mb-3">
      <label for="username">Username:</label>
      <input id="username" class="form-control" name="username" required>
    </div>

    <div class="mb-3">
      <label>Profilbild:</label>
      <div>
        {% if profilepics %}
          {% for img in profilepics %}
            <img src="{{ url_for('static', filename='images/' + img) }}"
                 class="profile-img {% if loop.first %}selected{% endif %}"
                 onclick="selectProfile(this,'{{ img }}')">
          {% endfor %}
          <input type="hidden" name="profilepic" id="profilepic" value="{{ profilepics[0] }}">
        {% else %}
          <p><em>Keine Profilbilder gefunden.</em></p>
        {% endif %}
      </div>
    </div>

    <button type="submit" class="btn btn-primary">Weiter</button>
  </form>
</div>

<script>
function selectProfile(el,img){
  document.getElementById('profilepic').value = img;
  document.querySelectorAll('.profile-img').forEach(i => i.classList.remove('selected'));
  el.classList.add('selected');
}
</script>
</body>
</html>
