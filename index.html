<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> <!-- wichtig für Handy -->
<title>Instagram Simulation</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
body { background:#fafafa; font-family:'Arial',sans-serif; margin:0; padding-bottom:80px; }
.post-card { max-width:500px; margin:1rem auto; border:1px solid #dbdbdb; border-radius:15px; background:white; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.post-header, .post-footer { padding:10px; }
.post-img { width:100%; border-radius:10px 10px 0 0; max-height:450px; object-fit:cover; }
.likes { font-weight:bold; font-size:1.1rem; margin-left:10px; }
.comment { margin:10px 0 0 0; font-size:0.95rem; }
.nav-bottom { position:fixed; bottom:0; left:0; right:0; border-top:1px solid #dbdbdb; background:white; display:flex; justify-content:space-around; padding:10px 0; z-index:100;}
.nav-bottom a { color:black; font-size:1.5rem; }
.toast { position: fixed; top:80px; right:-300px; background:#fff; border:1px solid #dbdbdb; padding:10px 15px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.2); opacity:0; transition:all 0.5s ease; z-index:2000;}
.toast.show { opacity:1; right:20px;}
.heart-animate { color:red !important; transform: scale(1.5); transition: all 0.3s ease; }
</style>
</head>
<body>

<div class="post-card">
  <div class="post-header d-flex align-items-center">
    <img src="static/images/profilepic.png" class="rounded-circle me-2" width="40" height="40">
    <strong>user123</strong>
  </div>
  <img src="static/images/self_1.png" class="post-img">
  <div class="post-footer">
    <p>Mein erster Post 🚀</p>
    <div class="d-flex align-items-center gap-3 mb-2">
      <i id="heart" class="fa-regular fa-heart fa-lg"></i>
      <span class="likes" id="likes">0 Likes</span>
      <i class="fa-regular fa-comment fa-lg"></i>
      <i class="fa-regular fa-paper-plane fa-lg"></i>
      <i class="fa-regular fa-bookmark fa-lg ms-auto"></i>
    </div>
    <div id="comments"></div>
  </div>
</div>

<div class="nav-bottom">
  <a href="#"><i class="fa-solid fa-house"></i></a>
  <a href="#"><i class="fa-solid fa-magnifying-glass"></i></a>
  <a href="#"><i class="fa-regular fa-square-plus"></i></a>
  <a href="#"><i class="fa-solid fa-video"></i></a>
  <a href="#"><i class="fa-regular fa-user"></i></a>
</div>

<div id="toast-container"></div>

<script>
/* -------------------
   Einstellungen
   ------------------- */
const condition = "inclusion"; // "inclusion" oder "exclusion"
const maxLikes = (condition==="inclusion") ? 1148 : 4;
const allComments = (condition==="inclusion")
  ? ["wow 😍", "Love this!", "wie toll!!", "sehr schön 😊"]
  : [];
const usernames = ["holymelon","sunsetvibes","pixelqueen","coffeeaddict","wanderlust","moonlight","tinycloud","dreamer","starlord","glitterbug"];

let likes = 0;
let displayLikes = 0;
let shownNotifications = new Set();
let lastNotificationTime = 0;
let commentIndex = 0;
let tick = 0;
let timer = (condition==="inclusion") ? 180 : 120; // Dauer in Sekunden

const notifications_inclusion = [
  {msg: "Dein Post scheint gut anzukommen!", trigger: 150},
  {msg: "Wow, schon 500 Likes!", trigger: 500},
  {msg: "Toll, du bist beliebt!", trigger: 750},
  {msg: "Dein Post hat schon 1000 Likes!", trigger: 1000}
];
const notifications_exclusion = [
  {msg: "Dein Post scheint gar nicht gut anzukommen...", trigger: 30},
  {msg: "Bisher hat keiner deiner Follower den Post geliked.", trigger: 60},
  {msg: "Dein Post erhält kaum Aufmerksamkeit.", trigger: 90},
  {msg: "Vielleicht probierst du es nochmal?", trigger: 110}
];

/* -------------------
   Hilfsfunktionen
   ------------------- */
function showToast(message){
  const toast = document.createElement('div');
  toast.className = "toast";
  toast.innerText = message;
  document.getElementById('toast-container').appendChild(toast);
  setTimeout(()=>{ toast.classList.add('show'); },100);
  setTimeout(()=>{ toast.classList.remove('show'); setTimeout(()=>toast.remove(),500);},4000);
  lastNotificationTime = Date.now();
}

function updateFeed(){
  tick++;

  // Likes berechnen
  if(condition==="inclusion"){
    let step = Math.max(1, Math.ceil(Math.pow(tick*0.03,1.35) * (0.6+Math.random()*0.5)));
    likes += step;
  } else {
    if(tick===10) likes=1;
    if(tick===50) likes=2;
    if(tick===80) likes=3;
    if(tick===100) likes=4;
  }
  if(likes > maxLikes) likes = maxLikes;

  // sanfte Anzeige
  if(displayLikes < likes){
    displayLikes += Math.ceil((likes - displayLikes)*0.3);
    if(displayLikes > likes) displayLikes = likes;
    document.getElementById('likes').innerText = displayLikes + " Likes";

    // Herz animieren
    const heart = document.getElementById("heart");
    heart.classList.add("fa-solid","heart-animate");
    heart.classList.remove("fa-regular");
    setTimeout(()=>heart.classList.remove("heart-animate"),300);
  }

  // Kommentare zeitgesteuert
  const commentSchedule = [30, 45, 60, 80, 100, 120];
  const commentsDiv = document.getElementById('comments');
  if(commentIndex < allComments.length && tick >= commentSchedule[commentIndex]){
    const div = document.createElement('div');
    div.classList.add('comment');
    const user = usernames[Math.floor(Math.random()*usernames.length)];
    div.innerHTML = "<strong>" + user + ":</strong> " + allComments[commentIndex];
    commentsDiv.appendChild(div);
    commentIndex++;
  }

  // Notifications
  if(condition==="inclusion"){
    notifications_inclusion.forEach(n=>{
      if(likes >= n.trigger && !shownNotifications.has(n.msg)){
        if(Date.now()-lastNotificationTime>5000){
          showToast(n.msg);
          shownNotifications.add(n.msg);
        }
      }
    });
  } else {
    notifications_exclusion.forEach(n=>{
      if(tick >= n.trigger && !shownNotifications.has(n.msg)){
        if(Date.now()-lastNotificationTime>5000){
          showToast(n.msg);
          shownNotifications.add(n.msg);
        }
      }
    });
  }

  if(timer>0){ 
    timer--; 
    setTimeout(updateFeed,1000);
  }
}

updateFeed();
</script>

</body>
</html>
