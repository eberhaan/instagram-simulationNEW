<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>Instagram Simulation</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background:#fafafa; font-family:Arial,sans-serif; }
.screen { display:none; }
.screen.active { display:block; }
.profile-img {
  width:150px; height:150px; border-radius:50%; cursor:pointer;
  margin:5px; border:2px solid transparent;
}
.profile-img.selected { border:2px solid #007bff; }
img.selectable {
  width:200px; height:200px; object-fit:cover; border-radius:10px; margin:5px;
  cursor:pointer; border:2px solid transparent;
}
img.selectable.selected { border:2px solid #007bff; }
</style>
</head>
<body>
<div class="container mt-4">

  <!-- SCREEN 1: Username & Profilbild -->
  <div id="screen1" class="screen active">
    <h3>W√§hle deinen Username und Profilbild</h3>
    <div class="mb-3">
      <label>Username:</label>
      <input type="text" id="username" class="form-control" placeholder="Dein Username">
    </div>
    <div class="mb-3" id="profilepics-container"></div>
    <button class="btn btn-primary" onclick="nextScreen1()">Weiter</button>
  </div>

  <!-- SCREEN 2: Bildauswahl -->
  <div id="screen2" class="screen">
    <h3 id="screen2-title"></h3>
    <div id="images-container" class="d-flex flex-wrap"></div>
    <button class="btn btn-primary mt-3" onclick="nextScreen2()">Weiter</button>
  </div>

  <!-- SCREEN 3: Caption -->
  <div id="screen3" class="screen">
    <h3>Schreibe eine Caption f√ºr deinen Post</h3>
    <img id="chosen-image-display" style="width:300px;border-radius:10px;margin-bottom:10px;">
    <textarea id="caption" class="form-control" rows="3" placeholder="Deine Caption..."></textarea>
    <button class="btn btn-primary mt-2" onclick="nextScreen3()">Posten</button>
  </div>

  <!-- SCREEN 4: Feed -->
  <div id="screen4" class="screen">
    <h3>Dein Feed</h3>
    <div class="d-flex align-items-center mb-3">
      <img id="feed-profilepic" style="width:60px;border-radius:50%;margin-right:10px;">
      <b id="feed-username"></b>
    </div>
    <img id="feed-chosen" style="width:250px;border-radius:10px;">
    <p id="feed-caption" class="mt-2"></p>
    <p>‚ù§Ô∏è <span id="feed-likes"></span> Likes</p>
    <div id="feed-comments"></div>
    <a id="limesurvey-link" class="btn btn-success mt-3" href="https://umfrage.umit-tirol.at/index.php/123456" target="_blank">Zur√ºck zur Umfrage</a>
  </div>

</div>

<script>
// -------- Daten --------
const profilepics = [
  "images/profilepic_1.png",
  "images/profilepic_2.png"
];
const imagesSelf = [
  "images/self_1.png",
  "images/self_2.png"
];
const imagesNeutral = [
  "images/neutral_1.png",
  "images/neutral_2.png"
];
const cond = "i";    // i = inclusion, e = exclusion
const pic_mode = "1"; // 1=selfies, 2=neutral

window.simData = {};

// -------- Screen Handling --------
function showScreen(n){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById("screen"+n).classList.add("active");
}

// -------- Screen 1 --------
const container = document.getElementById("profilepics-container");
let selectedProfile = profilepics[0];
profilepics.forEach(pic=>{
  const img = document.createElement("img");
  img.src = pic;
  img.className = "profile-img";
  if(pic===selectedProfile) img.classList.add("selected");
  img.onclick = ()=>{
    selectedProfile = pic;
    document.querySelectorAll(".profile-img").forEach(i=>i.classList.remove("selected"));
    img.classList.add("selected");
  };
  container.appendChild(img);
});

function nextScreen1(){
  const username = document.getElementById("username").value || "user123";
  window.simData.username = username;
  window.simData.profilepic = selectedProfile;
  showScreen(2);
  loadScreen2();
}

// -------- Screen 2 --------
function loadScreen2(){
  const imgs = pic_mode==="1"? imagesSelf : imagesNeutral;
  const container = document.getElementById("images-container");
  container.innerHTML = "";
  window.simData.chosen_image = imgs[0];
  imgs.forEach(imgName=>{
    const img = document.createElement("img");
    img.src = imgName;
    img.className = "selectable";
    if(imgName===window.simData.chosen_image) img.classList.add("selected");
    img.onclick = ()=>{
      window.simData.chosen_image = imgName;
      document.querySelectorAll(".selectable").forEach(i=>i.classList.remove("selected"));
      img.classList.add("selected");
    };
    container.appendChild(img);
  });
  document.getElementById("screen2-title").innerText = pic_mode==="1" ?
    "Bitte w√§hle das Bild, das dir am √§hnlichsten sieht." :
    "Bitte w√§hle das Bild, das dir am besten gef√§llt.";
}
function nextScreen2(){
  document.getElementById("chosen-image-display").src = window.simData.chosen_image;
  showScreen(3);
}

// -------- Screen 3 --------
function nextScreen3(){
  window.simData.caption = document.getElementById("caption").value;
  showScreen(4);
  loadFeed();
}

// -------- Screen 4 --------
function loadFeed(){
  document.getElementById("feed-username").innerText = window.simData.username;
  document.getElementById("feed-profilepic").src = window.simData.profilepic;
  document.getElementById("feed-chosen").src = window.simData.chosen_image;
  document.getElementById("feed-caption").innerText = window.simData.caption;

  if(cond==="i"){
    document.getElementById("feed-likes").innerText = 1148;
    const comments = ["wow üòç","Love this!","wie toll!!","sehr sch√∂n üòä"];
    document.getElementById("feed-comments").innerHTML = comments.map(c=>"<p>"+c+"</p>").join("");
  } else {
    document.getElementById("feed-likes").innerText = 4;
    document.getElementById("feed-comments").innerHTML = "";
  }
}
</script>
</body>
</html>
